(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{221:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(5155),a=r(2115),o=r(6874),l=r.n(o),n=r(747);let i=e=>{let{isOpen:t,toggleSidebar:r}=e,{logout:a}=(0,n.As)();return(0,s.jsxs)("div",{className:"fixed inset-y-0 left-0 z-30 w-64 bg-gray-800 text-white transform ".concat(t?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out md:translate-x-0"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"PontoAgent"}),(0,s.jsx)("button",{onClick:r,className:"md:hidden text-white",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("nav",{className:"mt-4",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/dashboard",className:"block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white",children:"Dashboard"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/dashboard/servidores",className:"block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white",children:"Servidores"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/dashboard/batidas",className:"block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white",children:"Batidas"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/dashboard/justificativas",className:"block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white",children:"Justificativas"})}),(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:"/dashboard/relatorios",className:"block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white",children:"Relat\xf3rios"})})]})}),(0,s.jsx)("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-700",children:(0,s.jsx)("button",{onClick:a,className:"w-full px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded",children:"Sair"})})]})},c=e=>{var t;let{toggleSidebar:r}=e,{user:a}=(0,n.As)();return(0,s.jsx)("header",{className:"bg-white shadow-md",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,s.jsx)("button",{onClick:r,className:"md:hidden text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("button",{className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium",children:(null==a||null==(t=a.username)?void 0:t.charAt(0).toUpperCase())||"U"})}),(0,s.jsx)("span",{className:"hidden md:inline-block",children:(null==a?void 0:a.username)||"Usu\xe1rio"})]})})})]})})};function d(e){let{children:t}=e,[r,o]=(0,a.useState)(!1),l=()=>{o(!r)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)(i,{isOpen:r,toggleSidebar:l}),(0,s.jsxs)("div",{className:"md:ml-64 flex flex-col min-h-screen",children:[(0,s.jsx)(c,{toggleSidebar:l}),(0,s.jsx)("main",{className:"flex-grow p-4",children:t}),(0,s.jsx)("footer",{className:"bg-white p-4 text-center text-gray-600 text-sm",children:"\xa9 2025 PontoAgent - Todos os direitos reservados"})]}),r&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden",onClick:l})]})}},747:(e,t,r)=>{"use strict";r.d(t,{As:()=>n,OJ:()=>l});var s=r(5155),a=r(2115);let o=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[n,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e?h(e):d(!1)},[]);let h=async e=>{try{let t,r=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});try{t=await r.json()}catch(e){throw console.error("Erro ao processar resposta JSON:",e),Error("Resposta inv\xe1lida do servidor")}r.ok?(l(t),i(e)):(console.error("Falha na autentica\xe7\xe3o:",t),localStorage.removeItem("token"))}catch(e){console.error("Erro ao buscar dados do usu\xe1rio:",e),localStorage.removeItem("token")}finally{d(!1)}};return(0,s.jsx)(o.Provider,{value:{user:r,token:n,login:(e,t)=>{localStorage.setItem("token",e),i(e),l(t),document.cookie="token=".concat(e,"; path=/; max-age=").concat(604800)},logout:()=>{localStorage.removeItem("token"),i(null),l(null),document.cookie="token=; path=/; max-age=0",window.location.href="/login"},isLoading:c},children:t})}function n(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth deve ser usado dentro de um AuthProvider");return e}},9451:(e,t,r)=>{Promise.resolve().then(r.bind(r,221))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(9451)),_N_E=e.O()}]);