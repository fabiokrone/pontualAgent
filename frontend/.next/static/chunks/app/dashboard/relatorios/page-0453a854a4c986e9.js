(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{231:(e,a,t)=>{Promise.resolve().then(t.bind(t,4371))},1753:(e,a,t)=>{"use strict";t.d(a,{Kv:()=>i,gf:()=>n,yl:()=>c});var s=t(5155),r=t(3464),l=t(2115);let o=r.A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{{let a=localStorage.getItem("token");a&&(e.headers.Authorization="Bearer ".concat(a))}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));let d=(0,l.createContext)(void 0);function i(e){let{children:a}=e,[t,r]=(0,l.useState)(!1),[i,n]=(0,l.useState)(null);return(0,s.jsx)(d.Provider,{value:{api:o,isLoading:t,error:i,setLoading:e=>{r(e)},setError:e=>{n(e)}},children:a})}function n(){let e=(0,l.useContext)(d);if(void 0===e)throw Error("useApi deve ser usado dentro de um ApiProvider");return e}let c={getStats:async()=>{try{return(await o.get("/dashboard/stats")).data}catch(e){throw e}},getRecentActivities:async()=>{try{return(await o.get("/dashboard/recent-activities")).data}catch(e){throw e}}}},4371:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var s=t(5155),r=t(2115),l=t(5695),o=t(1753);let d=e=>{let{period:a,setPeriod:t}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data In\xedcio"}),(0,s.jsx)("input",{type:"date",id:"startDate",name:"startDate",value:a.startDate,onChange:e=>t({...a,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),(0,s.jsx)("input",{type:"date",id:"endDate",name:"endDate",value:a.endDate,onChange:e=>t({...a,endDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Relat\xf3rio"}),(0,s.jsxs)("select",{id:"reportType",name:"reportType",value:a.reportType,onChange:e=>t({...a,reportType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"individual",children:"Individual"}),(0,s.jsx)("option",{value:"department",children:"Por Departamento"}),(0,s.jsx)("option",{value:"summary",children:"Resumo Geral"})]})]})]})},i=e=>{let{filters:a,setFilters:t}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"servidor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Servidor"}),(0,s.jsx)("input",{type:"text",id:"servidor",name:"servidor",value:a.servidor,onChange:e=>t({...a,servidor:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome ou matr\xedcula"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"secretaria",className:"block text-sm font-medium text-gray-700 mb-1",children:"Secretaria"}),(0,s.jsxs)("select",{id:"secretaria",name:"secretaria",value:a.secretaria,onChange:e=>t({...a,secretaria:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Todas"}),(0,s.jsx)("option",{value:"administracao",children:"Secretaria de Administra\xe7\xe3o"}),(0,s.jsx)("option",{value:"educacao",children:"Secretaria de Educa\xe7\xe3o"}),(0,s.jsx)("option",{value:"saude",children:"Secretaria de Sa\xfade"}),(0,s.jsx)("option",{value:"obras",children:"Secretaria de Obras"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{id:"status",name:"status",value:a.status,onChange:e=>t({...a,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Todos"}),(0,s.jsx)("option",{value:"regular",children:"Regular"}),(0,s.jsx)("option",{value:"irregular",children:"Irregular"}),(0,s.jsx)("option",{value:"justificado",children:"Justificado"})]})]})]})},n=e=>{let{onExport:a}=e;return(0,s.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,s.jsx)("button",{onClick:()=>a("pdf"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Exportar PDF"}),(0,s.jsx)("button",{onClick:()=>a("excel"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Exportar Excel"}),(0,s.jsx)("button",{onClick:()=>a("csv"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Exportar CSV"})]})},c=e=>{let{data:a}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Horas Trabalhadas por Dia"}),(0,s.jsxs)("div",{className:"h-64 w-full",children:[(0,s.jsx)("div",{className:"flex items-end h-48 space-x-2",children:a.map((e,a)=>(0,s.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,s.jsx)("div",{className:"w-full bg-blue-500 rounded-t",style:{height:"".concat(e.hoursWorked/10*100,"%"),maxHeight:"100%"}}),(0,s.jsx)("span",{className:"text-xs mt-1",children:e.date})]},a))}),(0,s.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"0h"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"10h"})]})]})]})},u=e=>{let{data:a}=e,t=a.reduce((e,a)=>e+a.count,0);return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Distribui\xe7\xe3o de Status"}),(0,s.jsx)("div",{className:"flex h-8 w-full rounded-full overflow-hidden",children:a.map((e,a)=>(0,s.jsx)("div",{className:"".concat("Regular"===e.status?"bg-green-500":"Irregular"===e.status?"bg-red-500":"bg-yellow-500"),style:{width:"".concat(e.count/t*100,"%")}},a))}),(0,s.jsx)("div",{className:"flex justify-between mt-4",children:a.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full mr-1 ".concat("Regular"===e.status?"bg-green-500":"Irregular"===e.status?"bg-red-500":"bg-yellow-500")}),(0,s.jsxs)("span",{className:"text-xs text-gray-700",children:[e.status,": ",e.count," (",Math.round(e.count/t*100),"%)"]})]},a))})]})},x=e=>{let{data:a,title:t}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mt-6",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:t||"Resumo por Servidor"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Servidor"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matr\xedcula"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dias Trabalhados"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Trabalhadas"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Extras"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Faltantes"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nome}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.matricula}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.diasTrabalhados}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.horasTrabalhadas}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.horasExtras}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.horasFaltantes}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Regular"===e.status?"bg-green-100 text-green-800":"Irregular"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},a))})]})})]})},m=e=>{let{data:a,title:t,sortable:r=!0}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mt-6",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:t||"Resumo por Departamento"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Departamento"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Servidores"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"M\xe9dia Horas Trabalhadas"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Horas Extras"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Horas Faltantes"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Regular"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nome}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.totalServidores}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.mediaHorasTrabalhadas}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.totalHorasExtras}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.totalHorasFaltantes}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.percentualRegular,"%"]})]},a))})]})})]})};function h(){let e=(0,l.useRouter)(),{api:a,isLoading:t,setLoading:h,error:p,setError:g}=(0,o.gf)(),[b,f]=(0,r.useState)({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],reportType:"individual"}),[y,j]=(0,r.useState)({servidor:"",secretaria:"",status:""}),[v,w]=(0,r.useState)({dailyHours:[],statusDistribution:[],summaryData:[],departmentData:[]}),[N,S]=(0,r.useState)(!1),D=async()=>{try{h(!0),g(null),await new Promise(e=>setTimeout(e,1e3));let e=[],a=new Date(b.startDate),t=new Date(b.endDate),s=Math.ceil((t.getTime()-a.getTime())/864e5);for(let t=0;t<=Math.min(s,14);t++){let s=new Date(a);s.setDate(a.getDate()+t),0!==s.getDay()&&6!==s.getDay()&&e.push({date:"".concat(s.getDate().toString().padStart(2,"0"),"/").concat((s.getMonth()+1).toString().padStart(2,"0")),hoursWorked:2*Math.random()+7})}let r=[{status:"Regular",count:Math.floor(50*Math.random())+150},{status:"Irregular",count:Math.floor(20*Math.random())+10},{status:"Justificado",count:Math.floor(15*Math.random())+5}];w({dailyHours:e,statusDistribution:r,summaryData:[{nome:"Jo\xe3o Silva",matricula:"00003347",diasTrabalhados:22,horasTrabalhadas:"176:00",horasExtras:"8:00",horasFaltantes:"0:00",status:"Regular"},{nome:"Maria Oliveira",matricula:"00004521",diasTrabalhados:21,horasTrabalhadas:"168:00",horasExtras:"0:00",horasFaltantes:"8:00",status:"Regular"},{nome:"Carlos Santos",matricula:"00002189",diasTrabalhados:18,horasTrabalhadas:"144:00",horasExtras:"0:00",horasFaltantes:"32:00",status:"Irregular"},{nome:"Ana Pereira",matricula:"00005632",diasTrabalhados:20,horasTrabalhadas:"160:00",horasExtras:"0:00",horasFaltantes:"16:00",status:"Justificado"},{nome:"Pedro Souza",matricula:"00001478",diasTrabalhados:22,horasTrabalhadas:"176:00",horasExtras:"4:00",horasFaltantes:"0:00",status:"Regular"}],departmentData:[{nome:"Secretaria de Administra\xe7\xe3o",totalServidores:45,mediaHorasTrabalhadas:"165:30",totalHorasExtras:"120:00",totalHorasFaltantes:"80:00",percentualRegular:85},{nome:"Secretaria de Educa\xe7\xe3o",totalServidores:120,mediaHorasTrabalhadas:"170:15",totalHorasExtras:"240:00",totalHorasFaltantes:"160:00",percentualRegular:78},{nome:"Secretaria de Sa\xfade",totalServidores:80,mediaHorasTrabalhadas:"168:45",totalHorasExtras:"320:00",totalHorasFaltantes:"40:00",percentualRegular:92},{nome:"Secretaria de Obras",totalServidores:35,mediaHorasTrabalhadas:"172:20",totalHorasExtras:"180:00",totalHorasFaltantes:"60:00",percentualRegular:80}]}),S(!0)}catch(e){console.error("Erro ao gerar relat\xf3rio:",e),g("N\xe3o foi poss\xedvel gerar o relat\xf3rio. Por favor, tente novamente mais tarde.")}finally{h(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Relat\xf3rios Avan\xe7ados"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gere relat\xf3rios personalizados com visualiza\xe7\xf5es detalhadas"})]}),(0,s.jsx)("button",{onClick:()=>e.back(),className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200",children:"Voltar"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Configura\xe7\xf5es do Relat\xf3rio"}),(0,s.jsx)(d,{period:b,setPeriod:f}),(0,s.jsx)(i,{filters:y,setFilters:j}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{onClick:D,disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:t?"Gerando...":"Gerar Relat\xf3rio"})})]}),p&&(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,s.jsx)("strong",{className:"font-bold",children:"Erro! "}),(0,s.jsx)("span",{className:"block sm:inline",children:p})]}),N&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Resultado do Relat\xf3rio"}),(0,s.jsx)(n,{onExport:e=>{alert("Exportando relat\xf3rio em formato ".concat(e.toUpperCase(),". Esta funcionalidade seria implementada com bibliotecas espec\xedficas para cada formato."))}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(c,{data:v.dailyHours}),(0,s.jsx)(u,{data:v.statusDistribution})]})]}),"individual"===b.reportType&&(0,s.jsx)(x,{data:v.summaryData}),"department"===b.reportType&&(0,s.jsx)(m,{data:v.departmentData}),"summary"===b.reportType&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{data:v.summaryData}),(0,s.jsx)(m,{data:v.departmentData})]})]})]})}},5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})}},e=>{var a=a=>e(e.s=a);e.O(0,[464,441,684,358],()=>a(231)),_N_E=e.O()}]);