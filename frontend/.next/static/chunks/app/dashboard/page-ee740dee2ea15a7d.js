(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{747:(e,t,s)=>{"use strict";s.d(t,{As:()=>l,OJ:()=>o});var r=s(5155),a=s(2115);let i=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,a.useState)(null),[l,d]=(0,a.useState)(null),[n,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e?x(e):c(!1)},[]);let x=async e=>{try{let t,s=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});try{t=await s.json()}catch(e){throw console.error("Erro ao processar resposta JSON:",e),Error("Resposta inv\xe1lida do servidor")}s.ok?(o(t),d(e)):(console.error("Falha na autentica\xe7\xe3o:",t),localStorage.removeItem("token"))}catch(e){console.error("Erro ao buscar dados do usu\xe1rio:",e),localStorage.removeItem("token")}finally{c(!1)}};return(0,r.jsx)(i.Provider,{value:{user:s,token:l,login:(e,t)=>{localStorage.setItem("token",e),d(e),o(t),document.cookie="token=".concat(e,"; path=/; max-age=").concat(604800)},logout:()=>{localStorage.removeItem("token"),d(null),o(null),document.cookie="token=; path=/; max-age=0",window.location.href="/login"},isLoading:n},children:t})}function l(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth deve ser usado dentro de um AuthProvider");return e}},966:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(5155),a=s(2115),i=s(747),o=s(1753);let l=e=>{let{title:t,value:s,icon:a}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:t}),(0,r.jsx)("p",{className:"text-2xl font-semibold mt-1",children:s})]}),(0,r.jsx)("div",{className:"text-blue-500",children:a})]})})},d=e=>{let{activities:t}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Atividades Recentes"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Servidor"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.servidor})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.tipo})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.data})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Aprovado"===e.status?"bg-green-100 text-green-800":"Pendente"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})})]},t))})]})})]})};function n(){let{user:e}=(0,i.As)(),[t,s]=(0,a.useState)({servidores:"0",batidasHoje:"0",justificativasPendentes:"0",diasIrregulares:"0"}),[n,c]=(0,a.useState)([]),[x,h]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{h(!0),m(null);let e=await o.yl.getStats();s({servidores:e.total_servidores.toString(),batidasHoje:e.batidas_hoje.toString(),justificativasPendentes:e.justificativas_pendentes.toString(),diasIrregulares:e.dias_irregulares.toString()});let t=await o.yl.getRecentActivities();c(t)}catch(e){console.error("Erro ao buscar dados do dashboard:",e),m("N\xe3o foi poss\xedvel carregar os dados do dashboard. Por favor, tente novamente mais tarde."),s({servidores:"245",batidasHoje:"532",justificativasPendentes:"18",diasIrregulares:"37"}),c([{servidor:"Jo\xe3o Silva",tipo:"Justificativa",data:"27/04/2025",status:"Pendente"},{servidor:"Maria Oliveira",tipo:"Batida",data:"27/04/2025",status:"Aprovado"},{servidor:"Carlos Santos",tipo:"Justificativa",data:"26/04/2025",status:"Rejeitado"},{servidor:"Ana Pereira",tipo:"Batida",data:"26/04/2025",status:"Aprovado"},{servidor:"Pedro Souza",tipo:"Justificativa",data:"25/04/2025",status:"Pendente"}])}finally{h(!1)}})()},[]),x)?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[u&&(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,r.jsx)("strong",{className:"font-bold",children:"Erro! "}),(0,r.jsx)("span",{className:"block sm:inline",children:u})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Bem-vindo, ",(null==e?void 0:e.username)||"Usu\xe1rio","!"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)(l,{title:"Total de Servidores",value:t.servidores,icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsx)(l,{title:"Batidas Hoje",value:t.batidasHoje,icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)(l,{title:"Justificativas Pendentes",value:t.justificativasPendentes,icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)(l,{title:"Dias Irregulares",value:t.diasIrregulares,icon:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)(d,{activities:n}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"A\xe7\xf5es R\xe1pidas"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("a",{href:"/dashboard/batidas/importar",className:"block p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h4",{className:"text-base font-medium text-gray-900",children:"Importar Batidas"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Importe arquivos de batidas para processamento"})]})]})}),(0,r.jsx)("a",{href:"/dashboard/justificativas",className:"block p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h4",{className:"text-base font-medium text-gray-900",children:"Aprovar Justificativas"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Revise e aprove justificativas pendentes"})]})]})}),(0,r.jsx)("a",{href:"/dashboard/relatorios",className:"block p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h4",{className:"text-base font-medium text-gray-900",children:"Gerar Relat\xf3rios"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Crie relat\xf3rios e espelhos de ponto"})]})]})})]})]})]})]})}},1753:(e,t,s)=>{"use strict";s.d(t,{Kv:()=>d,gf:()=>n,yl:()=>c});var r=s(5155),a=s(3464),i=s(2115);let o=a.A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));let l=(0,i.createContext)(void 0);function d(e){let{children:t}=e,[s,a]=(0,i.useState)(!1),[d,n]=(0,i.useState)(null);return(0,r.jsx)(l.Provider,{value:{api:o,isLoading:s,error:d,setLoading:e=>{a(e)},setError:e=>{n(e)}},children:t})}function n(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useApi deve ser usado dentro de um ApiProvider");return e}let c={getStats:async()=>{try{return(await o.get("/dashboard/stats")).data}catch(e){throw e}},getRecentActivities:async()=>{try{return(await o.get("/dashboard/recent-activities")).data}catch(e){throw e}}}},9694:(e,t,s)=>{Promise.resolve().then(s.bind(s,966))}},e=>{var t=t=>e(e.s=t);e.O(0,[464,441,684,358],()=>t(9694)),_N_E=e.O()}]);