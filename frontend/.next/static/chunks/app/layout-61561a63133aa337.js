(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{747:(e,t,r)=>{"use strict";r.d(t,{As:()=>c,OJ:()=>s});var o=r(5155),a=r(2115);let n=(0,a.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,a.useState)(null),[c,l]=(0,a.useState)(null),[i,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("token");e?d(e):u(!1)},[]);let d=async e=>{try{let t,r=await fetch("/api/auth/me",{headers:{Authorization:"Bearer ".concat(e)}});try{t=await r.json()}catch(e){throw console.error("Erro ao processar resposta JSON:",e),Error("Resposta inv\xe1lida do servidor")}r.ok?(s(t),l(e)):(console.error("Falha na autentica\xe7\xe3o:",t),localStorage.removeItem("token"))}catch(e){console.error("Erro ao buscar dados do usu\xe1rio:",e),localStorage.removeItem("token")}finally{u(!1)}};return(0,o.jsx)(n.Provider,{value:{user:r,token:c,login:(e,t)=>{localStorage.setItem("token",e),l(e),s(t),document.cookie="token=".concat(e,"; path=/; max-age=").concat(604800)},logout:()=>{localStorage.removeItem("token"),l(null),s(null),document.cookie="token=; path=/; max-age=0",window.location.href="/login"},isLoading:i},children:t})}function c(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth deve ser usado dentro de um AuthProvider");return e}},1753:(e,t,r)=>{"use strict";r.d(t,{Kv:()=>l,gf:()=>i,yl:()=>u});var o=r(5155),a=r(3464),n=r(2115);let s=a.A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));let c=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[r,a]=(0,n.useState)(!1),[l,i]=(0,n.useState)(null);return(0,o.jsx)(c.Provider,{value:{api:s,isLoading:r,error:l,setLoading:e=>{a(e)},setError:e=>{i(e)}},children:t})}function i(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useApi deve ser usado dentro de um ApiProvider");return e}let u={getStats:async()=>{try{return(await s.get("/dashboard/stats")).data}catch(e){throw e}},getRecentActivities:async()=>{try{return(await s.get("/dashboard/recent-activities")).data}catch(e){throw e}}}},3414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(5155);r(9324);var a=r(747),n=r(1753);function s(e){let{children:t}=e;return(0,o.jsx)("html",{lang:"pt-BR",children:(0,o.jsx)("body",{children:(0,o.jsx)(n.Kv,{children:(0,o.jsx)(a.OJ,{children:t})})})})}},8828:(e,t,r)=>{Promise.resolve().then(r.bind(r,3414))},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[533,464,441,684,358],()=>t(8828)),_N_E=e.O()}]);