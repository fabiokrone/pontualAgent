(()=>{var e={};e.id=838,e.ids=[838],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11833:(e,a,t)=>{Promise.resolve().then(t.bind(t,91175))},12412:e=>{"use strict";e.exports=require("assert")},16189:(e,a,t)=>{"use strict";var r=t(65773);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},59749:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/app/dashboard/relatorios/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/app/dashboard/relatorios/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},75385:(e,a,t)=>{Promise.resolve().then(t.bind(t,59749))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91175:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var r=t(60687),s=t(43210),o=t(16189),l=t(88071);let i=({period:e,setPeriod:a})=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data In\xedcio"}),(0,r.jsx)("input",{type:"date",id:"startDate",name:"startDate",value:e.startDate,onChange:t=>a({...e,startDate:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),(0,r.jsx)("input",{type:"date",id:"endDate",name:"endDate",value:e.endDate,onChange:t=>a({...e,endDate:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Relat\xf3rio"}),(0,r.jsxs)("select",{id:"reportType",name:"reportType",value:e.reportType,onChange:t=>a({...e,reportType:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"individual",children:"Individual"}),(0,r.jsx)("option",{value:"department",children:"Por Departamento"}),(0,r.jsx)("option",{value:"summary",children:"Resumo Geral"})]})]})]}),d=({filters:e,setFilters:a})=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"servidor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Servidor"}),(0,r.jsx)("input",{type:"text",id:"servidor",name:"servidor",value:e.servidor,onChange:t=>a({...e,servidor:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome ou matr\xedcula"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"secretaria",className:"block text-sm font-medium text-gray-700 mb-1",children:"Secretaria"}),(0,r.jsxs)("select",{id:"secretaria",name:"secretaria",value:e.secretaria,onChange:t=>a({...e,secretaria:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Todas"}),(0,r.jsx)("option",{value:"administracao",children:"Secretaria de Administra\xe7\xe3o"}),(0,r.jsx)("option",{value:"educacao",children:"Secretaria de Educa\xe7\xe3o"}),(0,r.jsx)("option",{value:"saude",children:"Secretaria de Sa\xfade"}),(0,r.jsx)("option",{value:"obras",children:"Secretaria de Obras"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,r.jsxs)("select",{id:"status",name:"status",value:e.status,onChange:t=>a({...e,status:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"regular",children:"Regular"}),(0,r.jsx)("option",{value:"irregular",children:"Irregular"}),(0,r.jsx)("option",{value:"justificado",children:"Justificado"})]})]})]}),n=({onExport:e})=>(0,r.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,r.jsx)("button",{onClick:()=>e("pdf"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Exportar PDF"}),(0,r.jsx)("button",{onClick:()=>e("excel"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Exportar Excel"}),(0,r.jsx)("button",{onClick:()=>e("csv"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Exportar CSV"})]}),c=({data:e})=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Horas Trabalhadas por Dia"}),(0,r.jsxs)("div",{className:"h-64 w-full",children:[(0,r.jsx)("div",{className:"flex items-end h-48 space-x-2",children:e.map((e,a)=>(0,r.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,r.jsx)("div",{className:"w-full bg-blue-500 rounded-t",style:{height:`${e.hoursWorked/10*100}%`,maxHeight:"100%"}}),(0,r.jsx)("span",{className:"text-xs mt-1",children:e.date})]},a))}),(0,r.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"0h"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"10h"})]})]})]}),u=({data:e})=>{let a=e.reduce((e,a)=>e+a.count,0);return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Distribui\xe7\xe3o de Status"}),(0,r.jsx)("div",{className:"flex h-8 w-full rounded-full overflow-hidden",children:e.map((e,t)=>(0,r.jsx)("div",{className:`${"Regular"===e.status?"bg-green-500":"Irregular"===e.status?"bg-red-500":"bg-yellow-500"}`,style:{width:`${e.count/a*100}%`}},t))}),(0,r.jsx)("div",{className:"flex justify-between mt-4",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:`w-3 h-3 rounded-full mr-1 ${"Regular"===e.status?"bg-green-500":"Irregular"===e.status?"bg-red-500":"bg-yellow-500"}`}),(0,r.jsxs)("span",{className:"text-xs text-gray-700",children:[e.status,": ",e.count," (",Math.round(e.count/a*100),"%)"]})]},t))})]})},x=({data:e,title:a})=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mt-6",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:a||"Resumo por Servidor"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Servidor"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matr\xedcula"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dias Trabalhados"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Trabalhadas"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Extras"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas Faltantes"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nome}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.matricula}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.diasTrabalhados}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.horasTrabalhadas}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.horasExtras}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.horasFaltantes}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"Regular"===e.status?"bg-green-100 text-green-800":"Irregular"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})})]},a))})]})})]}),m=({data:e,title:a,sortable:t=!0})=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mt-6",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:a||"Resumo por Departamento"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Departamento"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Servidores"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"M\xe9dia Horas Trabalhadas"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Horas Extras"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Horas Faltantes"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Regular"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nome}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.totalServidores}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.mediaHorasTrabalhadas}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.totalHorasExtras}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.totalHorasFaltantes}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.percentualRegular,"%"]})]},a))})]})})]});function p(){let e=(0,o.useRouter)(),{api:a,isLoading:t,setLoading:p,error:h,setError:g}=(0,l.gf)(),[b,f]=(0,s.useState)({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],reportType:"individual"}),[y,j]=(0,s.useState)({servidor:"",secretaria:"",status:""}),[v,w]=(0,s.useState)({dailyHours:[],statusDistribution:[],summaryData:[],departmentData:[]}),[N,D]=(0,s.useState)(!1),S=async()=>{try{p(!0),g(null),await new Promise(e=>setTimeout(e,1e3));let e=[],a=new Date(b.startDate),t=new Date(b.endDate),r=Math.ceil((t.getTime()-a.getTime())/864e5);for(let t=0;t<=Math.min(r,14);t++){let r=new Date(a);r.setDate(a.getDate()+t),0!==r.getDay()&&6!==r.getDay()&&e.push({date:`${r.getDate().toString().padStart(2,"0")}/${(r.getMonth()+1).toString().padStart(2,"0")}`,hoursWorked:2*Math.random()+7})}let s=[{status:"Regular",count:Math.floor(50*Math.random())+150},{status:"Irregular",count:Math.floor(20*Math.random())+10},{status:"Justificado",count:Math.floor(15*Math.random())+5}];w({dailyHours:e,statusDistribution:s,summaryData:[{nome:"Jo\xe3o Silva",matricula:"00003347",diasTrabalhados:22,horasTrabalhadas:"176:00",horasExtras:"8:00",horasFaltantes:"0:00",status:"Regular"},{nome:"Maria Oliveira",matricula:"00004521",diasTrabalhados:21,horasTrabalhadas:"168:00",horasExtras:"0:00",horasFaltantes:"8:00",status:"Regular"},{nome:"Carlos Santos",matricula:"00002189",diasTrabalhados:18,horasTrabalhadas:"144:00",horasExtras:"0:00",horasFaltantes:"32:00",status:"Irregular"},{nome:"Ana Pereira",matricula:"00005632",diasTrabalhados:20,horasTrabalhadas:"160:00",horasExtras:"0:00",horasFaltantes:"16:00",status:"Justificado"},{nome:"Pedro Souza",matricula:"00001478",diasTrabalhados:22,horasTrabalhadas:"176:00",horasExtras:"4:00",horasFaltantes:"0:00",status:"Regular"}],departmentData:[{nome:"Secretaria de Administra\xe7\xe3o",totalServidores:45,mediaHorasTrabalhadas:"165:30",totalHorasExtras:"120:00",totalHorasFaltantes:"80:00",percentualRegular:85},{nome:"Secretaria de Educa\xe7\xe3o",totalServidores:120,mediaHorasTrabalhadas:"170:15",totalHorasExtras:"240:00",totalHorasFaltantes:"160:00",percentualRegular:78},{nome:"Secretaria de Sa\xfade",totalServidores:80,mediaHorasTrabalhadas:"168:45",totalHorasExtras:"320:00",totalHorasFaltantes:"40:00",percentualRegular:92},{nome:"Secretaria de Obras",totalServidores:35,mediaHorasTrabalhadas:"172:20",totalHorasExtras:"180:00",totalHorasFaltantes:"60:00",percentualRegular:80}]}),D(!0)}catch(e){console.error("Erro ao gerar relat\xf3rio:",e),g("N\xe3o foi poss\xedvel gerar o relat\xf3rio. Por favor, tente novamente mais tarde.")}finally{p(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Relat\xf3rios Avan\xe7ados"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Gere relat\xf3rios personalizados com visualiza\xe7\xf5es detalhadas"})]}),(0,r.jsx)("button",{onClick:()=>e.back(),className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200",children:"Voltar"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Configura\xe7\xf5es do Relat\xf3rio"}),(0,r.jsx)(i,{period:b,setPeriod:f}),(0,r.jsx)(d,{filters:y,setFilters:j}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:(0,r.jsx)("button",{onClick:S,disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:t?"Gerando...":"Gerar Relat\xf3rio"})})]}),h&&(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,r.jsx)("strong",{className:"font-bold",children:"Erro! "}),(0,r.jsx)("span",{className:"block sm:inline",children:h})]}),N&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Resultado do Relat\xf3rio"}),(0,r.jsx)(n,{onExport:e=>{alert(`Exportando relat\xf3rio em formato ${e.toUpperCase()}. Esta funcionalidade seria implementada com bibliotecas espec\xedficas para cada formato.`)}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(c,{data:v.dailyHours}),(0,r.jsx)(u,{data:v.statusDistribution})]})]}),"individual"===b.reportType&&(0,r.jsx)(x,{data:v.summaryData}),"department"===b.reportType&&(0,r.jsx)(m,{data:v.departmentData}),"summary"===b.reportType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{data:v.summaryData}),(0,r.jsx)(m,{data:v.departmentData})]})]})]})}},92588:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>n});var r=t(65239),s=t(48088),o=t(88170),l=t.n(o),i=t(30893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(a,d);let n={children:["",{children:["dashboard",{children:["relatorios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,59749)),"/app/app/dashboard/relatorios/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,83249)),"/app/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,11799))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,11799))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/app/app/dashboard/relatorios/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/dashboard/relatorios/page",pathname:"/dashboard/relatorios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},94735:e=>{"use strict";e.exports=require("events")}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[447,820,711,814,461],()=>t(92588));module.exports=r})();