(()=>{var e={};e.id=63,e.ids=[63],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16189:(e,t,r)=>{"use strict";var s=r(65773);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},22910:(e,t,r)=>{Promise.resolve().then(r.bind(r,65246))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65246:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(60687),a=r(43210),i=r(16189);function o(){let[e,t]=(0,a.useState)(null),[r,o]=(0,a.useState)(!1),[n,d]=(0,a.useState)([]),[l,c]=(0,a.useState)(""),[p,u]=(0,a.useState)(""),m=(0,i.useRouter)(),x=async r=>{if(r.preventDefault(),!e)return void c("Por favor, selecione um arquivo para importar");o(!0),c(""),u("");try{let r=new FormData;r.append("file",e);let s=await fetch("http://localhost:8000/api/batidas/importar",{method:"POST",body:r,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),a=await s.json();if(!s.ok)throw Error(a.detail||"Erro ao importar batidas");u(`Arquivo importado com sucesso! ${a.total_batidas||0} batidas processadas.`),t(null),d([]),setTimeout(()=>{m.push("/dashboard/batidas")},2e3)}catch(e){c(e.message||"Ocorreu um erro ao importar o arquivo")}finally{o(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Importar Batidas"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Fa\xe7a upload de um arquivo de batidas para processamento"})]}),(0,s.jsx)("button",{onClick:()=>m.back(),className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200",children:"Voltar"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,s.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[l&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:l}),p&&(0,s.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:p}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Arquivo de Batidas"}),(0,s.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,s.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,s.jsx)("svg",{className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Clique para selecionar"})," ou arraste e solte"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Arquivo de texto (.txt) com formato espec\xedfico"})]}),(0,s.jsx)("input",{type:"file",className:"hidden",accept:".txt,text/plain",onChange:e=>{let r=e.target.files?.[0];if(!r)return;if("text/plain"!==r.type&&!r.name.endsWith(".txt")){c("Por favor, selecione um arquivo de texto (.txt)"),t(null);return}t(r),c("");let s=new FileReader;s.onload=e=>{d((e.target?.result).split("\n").filter(e=>""!==e.trim()).slice(0,10).map(e=>e.split("|")))},s.readAsText(r)},disabled:r})]})}),e&&(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Arquivo selecionado: ",(0,s.jsx)("span",{className:"font-medium",children:e.name})," (",(e.size/1024).toFixed(2)," KB)"]})]}),n.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"Preview do Arquivo"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Matr\xedcula"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Local"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hora"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sentido"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Terminal"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>(0,s.jsx)("tr",{children:e.map((e,t)=>(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-500",children:e},t))},t))})]})}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 italic",children:["Mostrando ",n.length," de ",e?.size?Math.ceil(e.size/100):"?"," linhas estimadas"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,s.jsx)("p",{children:"Formato esperado: empresa|matricula|local|data|hora|tipo|sentido|terminal"}),(0,s.jsx)("p",{children:"Exemplo: 000001|00003347|000001|01082024|0740|1|1|000001"})]}),(0,s.jsx)("button",{type:"submit",disabled:!e||r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:r?"Importando...":"Importar Batidas"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"Instru\xe7\xf5es"}),(0,s.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"1."})," Prepare um arquivo de texto (.txt) com as batidas no formato especificado."]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"2."})," Cada linha deve conter uma batida no formato: empresa|matricula|local|data|hora|tipo|sentido|terminal"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"3."})," A data deve estar no formato DDMMAAAA e a hora no formato HHMM."]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"4."}),' Selecione o arquivo e clique em "Importar Batidas".']}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"5."})," Ap\xf3s a importa\xe7\xe3o, as batidas ser\xe3o processadas automaticamente."]})]})]})]})}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},79816:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/app/dashboard/batidas/importar/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/app/dashboard/batidas/importar/page.tsx","default")},81442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>l});var s=r(65239),a=r(48088),i=r(88170),o=r.n(i),n=r(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let l={children:["",{children:["dashboard",{children:["batidas",{children:["importar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,79816)),"/app/app/dashboard/batidas/importar/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83249)),"/app/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,11799))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,11799))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/app/app/dashboard/batidas/importar/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/batidas/importar/page",pathname:"/dashboard/batidas/importar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")},99350:(e,t,r)=>{Promise.resolve().then(r.bind(r,79816))}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,820,711,814,461],()=>r(81442));module.exports=s})();